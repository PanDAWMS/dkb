Request for dataset attributes for oracle DB Production System 2
----------------------------------------------------------------

- t_production_dataset (dataset)
- t_production_container (container)
- t_production_task (task)
- atlas_deft.t_production_tag (tag)
- atlas_deft.t_hashtag (hashtag)
- atlas_deft.t_ht_to_task (ht_t)

set long 30000
set pagesize 500
set linesize 350

select  container.name,
		container.phys_group,
		container.status,
		container.timestamp,
		container.parent_tid,
		task.status,
		task.phys_group,
		task.provenance,
		task.campaign,
		task.subcampaign,
		task.username,
		task.start_time,
		task.submit_time,
		task.phys_short,
		task.comments,
		tag.trf_cache,
		tag.trf_release,
		tag.tag_parameters,
		hashtag.hashtag
from t_production_container container
RIGHT OUTER JOIN t_production_task task ON container.parent_tid = task.taskid  
RIGHT OUTER JOIN atlas_deft.t_production_tag tag ON SUBSTR(container.name, INSTR(container.name,'_', -1, 1)+1, ( (LENGTH(container.name) - INSTR(container.name,'_', -1, 1)) - 1)) = tag.name
FULL OUTER JOIN atlas_deft.t_ht_to_task ht_t ON task.taskid = ht_t.taskid 
FULL OUTER JOIN atlas_deft.t_hashtag hashtag ON ht_t.ht_id = hashtag.ht_id 
WHERE container.name LIKE ‘{dataset_name}%’;

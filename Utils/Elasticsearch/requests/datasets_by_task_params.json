/*
  Search  datasets by task parameters
*/
GET prodsys_rucio_ami/output_dataset/_search
{
  "query": {
    "has_parent": {
       "parent_type": "task",
       "query": {
         "bool": {
           "must": [
             {"term": {"<TERM_NAME>.keyword": "<TERM_VALUE>" }},
             {"term": {"<TERM_NAME>.keyword": "<TERM_VALUE>" }}
            ]
         }
       }
    }
  }
}

/*
Real example:
  returns all output datasets for the tasks,
  having campaign name as 'MC16' and output formats as 'AOD'
*/

GET prodsys_rucio_ami/output_dataset/_search
{
  "query": {
    "has_parent": {
       "parent_type": "task",
       "query": {
         "bool": {
           "must": [
             {"term": {"output_formats": "AOD"}},
             {"term": {"campaign.keyword": "MC16"}}
            ]
         }
      }
    }
  }
}

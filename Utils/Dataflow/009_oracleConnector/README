=============
* Stage 009 *
=============

1. Description
--------------
Takes data from Oracle with SQL query, stored in file, and output
them as NDJSON.

Currently works with specific set of queries only:
 * prodsys2ES + datasets
 * prodsys2ES

The goal is to make it work with any number and combination of queries.

2. HowTo
--------
To run `prodsys2ES` and `datasets` queries and join the results, use
  SQUASH mode:

  ./oracle2JSON.py --config $CONFIG --mode SQUASH

To run `prodsys2ES` query only, use PLAIN mode:

  ./oracle2JSON.py --config $CONFIG --mode PLAIN

The configuration file:
```
[oracle]
dsn: USER/PASSWORD@HOST:PORT/SERVICE_NAME

[queries]
# relative path to tasks query
tasks: query/prodsys2ES.sql
# relative path to datasets query
datasets: query/datasets.sql

[process]
# Query response processing mode:
#  PLAIN   -- pass records to output independently of each other
#  SQUASH  -- link 'datasets' records to 'task', joining them into a single
#             record
mode = SQUASH

[timestamps]
# initial timestamp
initial = 04-03-2014 00:00:00
# final timestamp
final = 10-05-2016 00:00:00
# hours offset from current timestamp
step = 24h

[logging]
# Current offset file
# (relative to the dir with the config file or absolute path)
# offset_file = .offset
```

Current offset by default is stored in the same directory as the config file,
  but it can be configured.
